<div class="login-box">
  <h1 class="h1">Sign up</h1>
  <p *ngIf="errorMsg" class="form-validation generic-error">{{errorMsg}}</p>
  <form *ngIf="!registrationDisabled" [formGroup]="signupForm" (ngSubmit)="onSubmit(signupForm.value)">
    <div class="textbox">
      <div class="form-input">
        <i class="fa fa-user icon" aria-hidden="true"></i>
        <input type="text" placeholder="Username" formControlName="username">
      </div>
      <div
        *ngIf="submitted && signupForm.controls.username.errors && signupForm.controls.username.errors.required"
        class="form-validation"
      >Username is required.</div>
      <div
        *ngIf="submitted && signupForm.controls.username.errors && signupForm.controls.username.errors.minlength"
        class="form-validation"
      >Username must be at least {{minUserLength}} characters long.</div>
      <div
        *ngIf="submitted && signupForm.controls.username.errors && signupForm.controls.username.errors.maxlength"
        class="form-validation"
      >Username must be shorter than {{maxUserLength + 1}} characters.</div>
      <div
        *ngIf="submitted && signupForm.errors && signupForm.errors.userNameExists"
        class="form-validation"
      >The selected username already exists.</div>
      <div
        *ngIf="submitted && signupForm.errors && signupForm.errors.userNameNotEmail"
        class="form-validation"
      >Username must not be an email address.</div>
    </div>

    <div class="textbox">
      <div class="form-input">
        <i class="fa fa-envelope icon" aria-hidden="true"></i>
        <input type="text" placeholder="E-mail address" formControlName="email">
      </div>
      <div
        *ngIf="submitted && signupForm.controls.email.errors && signupForm.controls.email.errors.required"
        class="form-validation"
      >Email address is required.</div>
      <div
        *ngIf="submitted && signupForm.errors && signupForm.errors.invalidEmail"
        class="form-validation"
      >Invalid email address format.</div>
      <div
        *ngIf="submitted && signupForm.errors && signupForm.errors.emailExists"
        class="form-validation"
      >There is aleady a registered user with the provided e-mail address.</div>
    </div>

    <div class="textbox">
      <div class="form-input">
        <i class="fa fa-user icon" aria-hidden="true"></i>
        <input type="text" placeholder="First name" formControlName="fname">
      </div>
      <div
        *ngIf="submitted && signupForm.controls.fname.errors && signupForm.controls.email.errors.required"
        class="form-validation"
      >First name is required.</div>
    </div>

    <div class="textbox">
      <div class="form-input">
        <i class="fa fa-user icon" aria-hidden="true"></i>
        <input type="text" placeholder="Last name" formControlName="lname">
      </div>
      <div
        *ngIf="submitted && signupForm.controls.lname.errors && signupForm.controls.lname.errors.required"
        class="form-validation"
      >Last name is required.</div>
    </div>

    <div class="textbox">
      <div class="form-input">
        <i class="fa fa-unlock icon" aria-hidden="true"></i>
        <input type="password" placeholder="Password" formControlName="password">
      </div>
      <div
        *ngIf="submitted && signupForm.controls.password.errors && signupForm.controls.password.errors.required"
        class="form-validation"
      >Password is required.</div>
      <div
        *ngIf="submitted && signupForm.controls.password.errors && signupForm.controls.password.errors.minlength"
        class="form-validation"
      >Password must be at least {{minPwLength}} characters long.</div>
    </div>

    <div class="textbox">
      <div class="form-input">
        <i class="fa fa-unlock icon" aria-hidden="true"></i>
        <input type="password" placeholder="Confirm password" formControlName="confirm">
      </div>
      <div
        *ngIf="submitted && signupForm.controls.confirm.errors && signupForm.controls.confirm.errors.required"
        class="form-validation"
      >Password confirmation is required.</div>
      <div
        *ngIf="submitted && signupForm.errors && signupForm.errors.passwordMustMatch"
        class="form-validation"
      >Passwords must match.</div>
    </div>

    <input type="hidden" formControlName="csrf">

    <input class="btn login-btn" type="submit" value="Sign up">
  </form>
  <input class="btn login-btn" type="button" value="Sign in" (click)="changeMode()">

</div>
